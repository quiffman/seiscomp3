SUBDIRS(ttt regions)

SET(THIRD_PARTY_DIRECTORY ../../3rd-party)
INCLUDE_DIRECTORIES(${THIRD_PARTY_DIRECTORY}/tau)

SET(
	CORE_SEISMOLOGY_SOURCES
		mb.cpp
		ML.cpp
		Mwp.cpp
		Mjma.cpp
		ttt.cpp

		ttt/libtau.cpp
		ttt/locsat.cpp

		regions/polygon.cpp
		regions/regions.cpp

		${THIRD_PARTY_DIRECTORY}/tau/libtau/emiasp91.c
		${THIRD_PARTY_DIRECTORY}/tau/libtau/libtau.c
		${THIRD_PARTY_DIRECTORY}/tau/libtau/tauint.c
		${THIRD_PARTY_DIRECTORY}/tau/libtau/tauspl.c
)

SET(
	CORE_SEISMOLOGY_HEADERS
		ttt.h
		regions.h
		magnitudes.h
)

SET(LIBLOCSAT_PATH ${THIRD_PARTY_DIRECTORY}/locsat/lib)

INCLUDE_DIRECTORIES(${LIBLOCSAT_PATH}/include)
INCLUDE_DIRECTORIES(${LIBLOCSAT_PATH}/include/db3)
INCLUDE_DIRECTORIES(${LIBLOCSAT_PATH}/include/css)

AUX_SOURCE_DIRECTORY(${LIBLOCSAT_PATH}/libgeog LIBGEOG_SOURCES)
AUX_SOURCE_DIRECTORY(${LIBLOCSAT_PATH}/libinterp LIBINTERP_SOURCES)
AUX_SOURCE_DIRECTORY(${LIBLOCSAT_PATH}/libloc LIBLOC_SOURCES)
AUX_SOURCE_DIRECTORY(${LIBLOCSAT_PATH}/librdwrt LIBRDWRT_SOURCES)
AUX_SOURCE_DIRECTORY(${LIBLOCSAT_PATH}/libtime LIBTIME_SOURCES)
AUX_SOURCE_DIRECTORY(${LIBLOCSAT_PATH}/libf2c LIBF2C_SOURCES)

SET(
	CORE_SEISMOLOGY_SOURCES
		${CORE_SEISMOLOGY_SOURCES}
		locsat.cpp
		locatorinterface.cpp
		locsat_internal.cpp
		${LIBGEOG_SOURCES}
		${LIBINTERP_SOURCES}
		${LIBLOC_SOURCES}
		${LIBRDWRT_SOURCES}
		${LIBTIME_SOURCES}
		${LIBXPRT2_SOURCES}
		${LIBF2C_SOURCES}
)

SET(
	CORE_SEISMOLOGY_HEADERS
		${CORE_SEISMOLOGY_HEADERS}
		locsat.h
		locatorinterface.h
)


INCLUDE_DIRECTORIES(${F2C_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${Boost_INCLUDE_DIRS})

IF (MSEED_FOUND)
	INCLUDE_DIRECTORIES(${LIBMSEED_INCLUDE_DIR})
ENDIF (MSEED_FOUND)

SET(HAVE_LOCSAT 1)

SC_ADD_LIBRARY(CORE_SEISMOLOGY seismology)

IF ( MACOSX )
    SET_TARGET_PROPERTIES(
       seiscomp3_seismology
       PROPERTIES PREFIX lib
       LINK_FLAGS -single_module
    )
ENDIF ( MACOSX )

SC_LIB_LINK_LIBRARIES_INTERNAL(seismology config datamodel math coregeo)
SC_LIB_LINK_LIBRARIES(seismology ${Boost_filesystem_LIBRARIES} ${Boost_regex_LIBRARIES})
SC_LIB_INSTALL_HEADERS(CORE_SEISMOLOGY)
